!function(t){function e(n){if(i[n])return i[n].exports;var o=i[n]={exports:{},id:n,loaded:!1};return t[n].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){var n,o;n=[i,e,i(1),i(2)],o=function(t,e,n,o){function s(){u.checked?(d&&d.dispose(),d=new n(r.widgets)):(d&&d.dispose(),d=new o(r.widgets)),d.start(-a,-l,.05)}i(4);var r=i(3),a=+r.startPosition.a.x,l=+r.startPosition.a.y,u=document.getElementById("canvasInput"),c=document.getElementById("htmlInput");u.addEventListener("click",s),c.addEventListener("click",s);var d;u.checked=!0,s()}.apply(e,n),!(void 0!==o&&(t.exports=o))},function(t,e,i){var n,o,s=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i};n=[i,e,i(6),i(7)],o=function(t,e,i,n){var o=function(t){function e(e){t.call(this,e),this._setCanvasSize(),this._addEventHandler(window,"resize",this._onResize)}return s(e,t),e.prototype.getCanvas=function(){var t=document.getElementById("board"),e=document.createElement("canvas");return this._ctx=e.getContext("2d"),t.appendChild(e),e},e.prototype.dispose=function(){t.prototype.dispose.call(this),document.getElementById("board").innerHTML=""},e.prototype.getWidgetCreator=function(){return new n},Object.defineProperty(e.prototype,"canvasContext",{get:function(){return this._ctx},enumerable:!0,configurable:!0}),e.prototype._setCanvasSize=function(){var t=this._canvas,e=this._canvas.parentElement;t.width=e.clientWidth,t.height=e.clientHeight},e.prototype._onResize=function(){this._setCanvasSize(),this.draw(0,0)},e.prototype.draw=function(e,i){var n=this._canvas;this._ctx.clearRect(0,0,n.width,n.height),t.prototype.draw.call(this,e,i)},e}(i);return o}.apply(e,n),!(void 0!==o&&(t.exports=o))},function(t,e,i){var n,o,s=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i};n=[i,e,i(6),i(8)],o=function(t,e,i,n){var o=function(t){function e(){t.apply(this,arguments)}return s(e,t),e.prototype.getCanvas=function(){return document.getElementById("board")},e.prototype.getWidgetCreator=function(){return new n},Object.defineProperty(e.prototype,"widgetContainer",{get:function(){return this._canvas},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){t.prototype.dispose.call(this),document.getElementById("board").innerHTML=""},e}(i);return o}.apply(e,n),!(void 0!==o&&(t.exports=o))},function(t){t.exports={widgets:[{scale:1,y:-66.66506172527477,x:-372.4448694484503,text:"Задача 1",type:5,style:{},idStr:"74254410",id:74254410},{scale:1,y:-66.66506172527477,x:-163.07856944845025,text:"Задача 2",type:5,style:{},idStr:"74254522",id:74254522},{scale:1,y:-66.66506172527477,x:64.00334055154977,text:"Задача 3",type:5,style:{},idStr:"74254523",id:74254523},{scale:1,y:-66.66506172527477,x:296.7220355515498,text:"Задача 4",type:5,style:{},idStr:"74254524",id:74254524},{scale:1,y:-66.66506172527477,x:539.2369555708999,text:"Задача 5",type:5,style:{},idStr:"74254526",id:74254526},{scale:1,y:140.10872266080014,x:-372.44486944845016,text:"Задача 1",type:5,style:{},idStr:"74254528",id:74254528},{scale:1,y:140.10872266080014,x:-163.07856944845014,text:"Задача 2",type:5,style:{},idStr:"74254529",id:74254529},{scale:1,y:140.10872266080014,x:64.00334055154988,text:"Задача 3",type:5,style:{},idStr:"74254530",id:74254530},{scale:1,y:140.10872266080014,x:296.72203555154994,text:"Задача 4",type:5,style:{},idStr:"74254531",id:74254531},{scale:1,y:140.10872266080014,x:539.2369555709,text:"Задача 5",type:5,style:{},idStr:"74254532",id:74254532},{scale:1,y:471.5349342207735,x:-372.44486944845016,text:"Задача 1",type:5,style:{},idStr:"74254533",id:74254533},{scale:1,y:471.5349342207735,x:-163.07856944845017,text:"Задача 2",type:5,style:{},idStr:"74254534",id:74254534},{scale:1,y:471.5349342207736,x:64.00334055154983,text:"Задача 3",type:5,style:{},idStr:"74254535",id:74254535},{scale:1,y:471.5349342207736,x:296.7220355515499,text:"Задача 4",type:5,style:{},idStr:"74254536",id:74254536},{scale:1,y:471.5349342207736,x:539.2369555708999,text:"Задача 5",type:5,style:{},idStr:"74254537",id:74254537},{scale:1,y:678.3087186068485,x:-372.44486944845005,text:"Задача 1",type:5,style:{},idStr:"74254538",id:74254538},{scale:1,y:678.3087186068485,x:-163.07856944845005,text:"Задача 2",type:5,style:{},idStr:"74254539",id:74254539},{scale:1,y:678.3087186068485,x:64.00334055154994,text:"Задача 3",type:5,style:{},idStr:"74254540",id:74254540},{scale:1,y:678.3087186068485,x:296.72203555155,text:"Задача 4",type:5,style:{},idStr:"74254541",id:74254541},{scale:1,y:678.3087186068485,x:539.2369555709,text:"Задача 5",type:5,style:{},idStr:"74254542",id:74254542},{scale:1,y:1021.5664894424112,x:-372.44486944845005,text:"Задача 1",type:5,style:{},idStr:"74254543",id:74254543},{scale:1,y:1021.5664894424112,x:-163.07856944845008,text:"Задача 2",type:5,style:{},idStr:"74254544",id:74254544},{scale:1,y:1021.5664894424115,x:64.00334055154997,text:"Задача 3",type:5,style:{},idStr:"74254545",id:74254545},{scale:1,y:1021.5664894424115,x:296.72203555155,text:"Задача 4",type:5,style:{},idStr:"74254546",id:74254546},{scale:1,y:1021.5664894424115,x:539.2369555709,text:"Задача 5",type:5,style:{},idStr:"74254547",id:74254547},{scale:1,y:1228.3402738284863,x:-372.44486944844994,text:"Задача 1",type:5,style:{},idStr:"74254548",id:74254548},{scale:1,y:1228.3402738284863,x:-163.07856944844997,text:"Задача 2",type:5,style:{},idStr:"74254549",id:74254549},{scale:1,y:1228.3402738284863,x:64.00334055155008,text:"Задача 3",type:5,style:{},idStr:"74254550",id:74254550},{scale:1,y:1228.3402738284863,x:296.7220355515501,text:"Задача 4",type:5,style:{},idStr:"74254551",id:74254551},{scale:1,y:1228.3402738284863,x:539.2369555709001,text:"Задача 5",type:5,style:{},idStr:"74254552",id:74254552},{scale:6.086279093879835,width:52.7,y:-117.30227078647636,x:-732.5568618158235,text:'<P><F C="#000000">Дизайн:</FONT></P>',angle:0,type:4,style:{ta:"l",bc:-1},idStr:"74254554",id:74254554},{scale:6.086279093879835,width:53,y:420.8977251595718,x:-762.6094538518868,text:'<P><F C="#000000">Сервер:</FONT></P>',angle:0,type:4,style:{},idStr:"74254561",id:74254561},{scale:6.086279093879835,width:53,y:970.9292803812095,x:-762.6094538518868,text:'<P><F C="#000000">Клиент:</FONT></P>',angle:0,type:4,style:{},idStr:"74254563",id:74254563},{scale:6.086279093879834,width:300,y:291.4845694490459,x:2307.445081352265,text:'<P><F C="#000000">Описание задачи 1:</FONT></P><P><F C="#000000"></FONT></P><P><F C="#000000">Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat. Duis autem vel eum iriure dolor in hendrerit in vulputate velit esse molestie consequat, vel illum dolore eu feugiat nulla facilisis at vero eros et accumsan et iusto odio dignissim qui blandit praesent luptatum zzril delenit augue duis dolore te feugait nulla facilisi.</FONT></P>',angle:0,type:4,style:{bc:-1},idStr:"74254570",id:74254570},{scale:6.086279093879834,width:300,y:291.4845694490459,x:4646.494782120864,text:'<P><F C="#000000">Описание задачи 2:</FONT></P><P><F C="#000000"></FONT></P><P><F C="#000000">Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat. Duis autem vel eum iriure dolor in hendrerit in vulputate velit esse molestie consequat, vel illum dolore eu feugiat nulla facilisis at vero eros et accumsan et iusto odio dignissim qui blandit praesent luptatum zzril delenit augue duis dolore te feugait nulla facilisi.</FONT></P>',angle:0,type:4,style:{},idStr:"74254584",id:74254584},{scale:6.086279093879834,width:300,y:291.4845694490459,x:6962.270356513656,text:'<P><F C="#000000">Описание задачи 3:</FONT></P><P><F C="#000000"></FONT></P><P><F C="#000000">Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat. Duis autem vel eum iriure dolor in hendrerit in vulputate velit esse molestie consequat, vel illum dolore eu feugiat nulla facilisis at vero eros et accumsan et iusto odio dignissim qui blandit praesent luptatum zzril delenit augue duis dolore te feugait nulla facilisi.</FONT></P>',angle:0,type:4,style:{},idStr:"74254587",id:74254587},{scale:6.086279093879834,width:300,y:291.4845694490459,x:9230.004759318459,text:'<P><F C="#000000">Описание задачи 4:</FONT></P><P><F C="#000000"></FONT></P><P><F C="#000000">Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat. Duis autem vel eum iriure dolor in hendrerit in vulputate velit esse molestie consequat, vel illum dolore eu feugiat nulla facilisis at vero eros et accumsan et iusto odio dignissim qui blandit praesent luptatum zzril delenit augue duis dolore te feugait nulla facilisi.</FONT></P>',angle:0,type:4,style:{},idStr:"74254590",id:74254590},{scale:6.086279093879834,width:300,y:300,x:11500,text:'<P><F C="#000000">Описание задачи 5:</FONT></P><P><F C="#000000"></FONT></P><P><F C="#000000">Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat. Duis autem vel eum iriure dolor in hendrerit in vulputate velit esse molestie consequat, vel illum dolore eu feugiat nulla facilisis at vero eros et accumsan et iusto odio dignissim qui blandit praesent luptatum zzril delenit augue duis dolore te feugait nulla facilisi.</FONT></P>',angle:0,type:4,style:{},idStr:"74254591",id:74254591},{scale:6.086279093879834,width:300,y:1952.879057272401,x:2307.4450813522644,text:'<P><F C="#000000">Описание задачи 1:</FONT></P><P><F C="#000000"></FONT></P><P><F C="#000000">Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat. Duis autem vel eum iriure dolor in hendrerit in vulputate velit esse molestie consequat, vel illum dolore eu feugiat nulla facilisis at vero eros et accumsan et iusto odio dignissim qui blandit praesent luptatum zzril delenit augue duis dolore te feugait nulla facilisi.</FONT></P>',angle:0,type:4,style:{},idStr:"74254593",id:74254593},{scale:6.086279093879834,width:300,y:1952.879057272401,x:4646.494782120864,text:'<P><F C="#000000">Описание задачи 2:</FONT></P><P><F C="#000000"></FONT></P><P><F C="#000000">Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat. Duis autem vel eum iriure dolor in hendrerit in vulputate velit esse molestie consequat, vel illum dolore eu feugiat nulla facilisis at vero eros et accumsan et iusto odio dignissim qui blandit praesent luptatum zzril delenit augue duis dolore te feugait nulla facilisi.</FONT></P>',angle:0,type:4,style:{},idStr:"74254594",id:74254594},{scale:6.086279093879834,width:300,y:1952.879057272401,x:6962.270356513656,text:'<P><F C="#000000">Описание задачи 3:</FONT></P><P><F C="#000000"></FONT></P><P><F C="#000000">Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat. Duis autem vel eum iriure dolor in hendrerit in vulputate velit esse molestie consequat, vel illum dolore eu feugiat nulla facilisis at vero eros et accumsan et iusto odio dignissim qui blandit praesent luptatum zzril delenit augue duis dolore te feugait nulla facilisi.</FONT></P>',angle:0,type:4,style:{},idStr:"74254595",id:74254595},{scale:6.086279093879834,width:300,y:1952.879057272401,x:9230.004759318457,text:'<P><F C="#000000">Описание задачи 4:</FONT></P><P><F C="#000000"></FONT></P><P><F C="#000000">Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat. Duis autem vel eum iriure dolor in hendrerit in vulputate velit esse molestie consequat, vel illum dolore eu feugiat nulla facilisis at vero eros et accumsan et iusto odio dignissim qui blandit praesent luptatum zzril delenit augue duis dolore te feugait nulla facilisi.</FONT></P>',angle:0,type:4,style:{},idStr:"74254596",id:74254596},{scale:6.086279093879834,width:300,y:1952.879057272401,x:11425.58397657947,text:'<P><F C="#000000">Описание задачи 5:</FONT></P><P><F C="#000000"></FONT></P><P><F C="#000000">Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat. Duis autem vel eum iriure dolor in hendrerit in vulputate velit esse molestie consequat, vel illum dolore eu feugiat nulla facilisis at vero eros et accumsan et iusto odio dignissim qui blandit praesent luptatum zzril delenit augue duis dolore te feugait nulla facilisi.</FONT></P>',angle:0,type:4,style:{},idStr:"74254597",id:74254597},{scale:20.313789535646745,width:93,y:-1529.694466497313,x:3969.65227007228,text:'<P><F C="#FFFFFF">Список задач:<F C="#000000"></FONT></FONT></P>',angle:0,type:4,style:{bc:2248051},idStr:"74254598",id:74254598},{scale:11.428571428571429,width:79.5,y:3715.643352423037,x:288.97757000000036,text:'<P><F C="#000000">Референсы:</FONT></P>',angle:0,type:4,style:{ta:"l",bc:16554060},idStr:"74254604",id:74254604},{type:1,url:"http://s1.realtimeboard.com/resources/5252525252/125307/367/137/1/image.png",scale:1.538732235048052,y:4432.450460583055,x:1669.3182225464548,angle:0,idStr:"74254617",id:74254617},{type:1,url:"http://s1.realtimeboard.com/resources/5252525252/125355/133/132/1/image.png",scale:3.0484501042669976,y:4439.524681700444,x:3733.5529180388894,angle:0,idStr:"74254620",id:74254620},{type:1,url:"http://s1.realtimeboard.com/resources/5252525252/125306/345/123/1/image.jpg",scale:4.247800734497211,y:4405.160085698776,x:6380.062824288991,angle:0,idStr:"74254624",id:74254624},{type:1,url:"http://s1.realtimeboard.com/resources/5252525252/125305/137/257/1/image.png",scale:1.617577432827365,y:4390.190503915048,x:8927.792252216861,angle:-90,idStr:"74254625",id:74254625},{type:1,url:"http://s1.realtimeboard.com/resources/5252525252/125335/277/263/1/image.png",scale:7.482071452141237,y:6160.850599450127,x:3807.0550627628736,angle:180,idStr:"74254628",id:74254628},{type:1,url:"http://s1.realtimeboard.com/resources/5252525252/125336/75/325/1/image.png",scale:8.83928093274389,y:6144.407686055425,x:1557.1700761907018,angle:0,idStr:"74254630",id:74254630},{scale:11.428571428571429,width:45.3,y:-6.736490296703295,x:-1458.2012545956643,text:'<P><F C="#000000">Таски:</FONT></P>',angle:0,type:4,style:{bc:16554060},idStr:"74254643",id:74254643}],startPosition:{a:{x:-2486,y:-2089},b:{x:12589,y:7081}},presentation:null,idStr:"74254402",id:74254402}},function(){},,function(t,e,i){var n,o;n=[i,e],o=function(){var t=function(){function t(t){var e=this;this._isMoving=!1,this._sx=0,this._sy=0,this._ox=0,this._oy=0,this._scale=1,this._canvas=this.getCanvas(),this._eventListeners=[],this._addEventHandler(this._canvas,"mousedown",this._onMouseDown),this._addEventHandler(this._canvas,"mouseup",this._onMouseUp),this._addEventHandler(this._canvas,"mousemove",this._onMouseMove),this._addEventHandler(this._canvas,"wheel",this._onWheel),this._widgets=[];var i=this.getWidgetCreator();t.forEach(function(t){e._widgets.push(i.createWidget(t.type,e,t))})}return t.prototype._addEventHandler=function(t,e,i){var n=i.bind(this);t.addEventListener(e,n),this._eventListeners.push({element:t,eventType:e,listner:n})},t.prototype.getCanvas=function(){throw new Error("Abstact method")},t.prototype.getWidgetCreator=function(){throw new Error("Abstact method")},t.prototype.start=function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=1),this._scale=i,this.draw(t,t)},t.prototype.dispose=function(){this._eventListeners.forEach(function(t){t.element.removeEventListener(t.eventType,t.listner)})},t.prototype._onMouseDown=function(t){this._isMoving=!0,this._sx=t.clientX,this._sy=t.clientY},t.prototype._onMouseUp=function(){this._isMoving=!1},t.prototype._onWheel=function(t){var e=t.deltaY||t.detail||t.wheelDelta;if(0>e){if(this._scale>=7)return;this._scale+=.05}else{if(Math.abs(this._scale-.05)<=.01)return;this._scale-=.05}this._ox=t.clientX,this._oy=t.clientY,this.draw(0,0)},t.prototype._onMouseMove=function(t){this._isMoving&&(this.draw(t.clientX-this._sx,t.clientY-this._sy),this._sx=t.clientX,this._sy=t.clientY)},t.prototype.draw=function(t,e){var i=this;this._widgets.forEach(function(n){n.draw(t,e,i._ox,i._oy,i._scale)})},t}();return t}.apply(e,n),!(void 0!==o&&(t.exports=o))},function(t,e,i){var n,o,s=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i};n=[i,e,i(11),i(12),i(13),i(14),i(15)],o=function(t,e,i,n,o,r){var a=function(t){function e(){t.call(this),this[4]=function(t,e){return new n(t,e)},this[5]=function(t,e){return new o(t,e)},this[1]=function(t,e){return new r(t,e)}}return s(e,t),e.prototype.createWidget=function(t,e,i){var n=e;return this[t](n.canvasContext,i)},e}(i);return a}.apply(e,n),!(void 0!==o&&(t.exports=o))},function(t,e,i){var n,o,s=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i};n=[i,e,i(11),i(16),i(17),i(18),i(15)],o=function(t,e,i,n,o,r){var a=function(t){function e(){t.call(this),this[4]=function(t,e){return new n(t,e)},this[5]=function(t,e){return new o(t,e)},this[1]=function(t,e){return new r(t,e)}}return s(e,t),e.prototype.createWidget=function(t,e,i){var n=e;return this[t](n.widgetContainer,i)},e}(i);return a}.apply(e,n),!(void 0!==o&&(t.exports=o))},,,function(t,e,i){var n,o;n=[i,e],o=function(){var t=function(){function t(){}return t.prototype.createWidget=function(){throw new Error("Abstract method")},t}();return t}.apply(e,n),!(void 0!==o&&(t.exports=o))},function(t,e,i){var n,o,s=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i};n=[i,e,i(19)],o=function(t,e,i){var n=function(t){function e(e,i){t.call(this,e,i.x,i.y),this._width=i.width*i.scale,this._text=i.text,this._fontSize=10*i.scale,this._lineHeight=16.5*i.scale}return s(e,t),e.prototype.draw=function(e,i,n,o,s){var r=this;t.prototype.draw.call(this,e,i,n,o,s),this._ctx.font=this._fontSize*s+"pt Arial",this._ctx.textBaseline="top";var a=this._text.match(/<P>(.*?)<\/P>/g),l=this._y,u=this._lineHeight*s;a.forEach(function(t){var e=t.match(/<P><F C="(.*?)">(.*?)<\/FONT><\/P>/);if(e){r._ctx.fillStyle=e[1];var i=e[2],i=i.replace(/<F C=".*">.*?<\/FONT>/g,"");l=r._wrapText(r._ctx,i,r._x,l,r._width*s,u),l+=u}})},e.prototype._wrapText=function(t,e,i,n,o,s){for(var r=e.split(" "),a=r.length,l=[],u=0;a>u;u++){l.push(r[u]);var c=t.measureText(l.join(" ")).width;c>o&&(l.pop(),t.fillText(l.join(" "),i,n),l=[r[u]],n+=s)}return t.fillText(l.join(" "),i,n),n},e}(i);return n}.apply(e,n),!(void 0!==o&&(t.exports=o))},function(t,e,i){var n,o,s=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i};n=[i,e,i(19)],o=function(t,e,i){var n=function(t){function e(e,i){t.call(this,e,i.x,i.y),this._text=i.text}return s(e,t),e.prototype.draw=function(e,i,n,o,s){t.prototype.draw.call(this,e,i,n,o,s);var r=200*s;this._ctx.fillStyle="#FFFF00",this._ctx.fillRect(this._x,this._y,r,r),this._ctx.fillStyle="#000",this._ctx.font=25*s+"pt Arial";var a=this._ctx.measureText(this._text).width;this._ctx.textBaseline="top",this._ctx.fillText(this._text,this._x+(r-a)/2,this._y)},e}(i);return n}.apply(e,n),!(void 0!==o&&(t.exports=o))},function(t,e,i){var n,o,s=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i};n=[i,e,i(19),i(20)],o=function(t,e,i,n){var o=function(t){function e(e,i){var o=this;t.call(this,e,i.x,i.y),this._angle=i.angle,this._imgScale=i.scale,this._promise=new n,this._img=new Image,this._img.onload=function(){o._width=o._img.width,o._height=o._img.height,o._promise.resolve()},this._img.src=i.url}return s(e,t),e.prototype.draw=function(e,i,n,o,s){var r=this;t.prototype.draw.call(this,e,i,n,o,s),this._promise.done(function(){var t=r._imgScale*s,e=r._width,i=r._height;r._ctx.save();var n=r._angle*Math.PI/180,o=Math.cos(n)*e,a=-Math.sin(n)*i,l=Math.cos(n)*i,u=Math.sin(n)*e;o=o>0?0:o,a=a>0?0:a,l=l>0?0:l,u=u>0?0:u,r._ctx.translate(r._x,r._y),r._ctx.translate(-(o+a)*t,-(l+u)*t),r._ctx.rotate(n),r._ctx.scale(t,t),r._ctx.drawImage(r._img,0,0),r._ctx.restore()})},e}(i);return o}.apply(e,n),!(void 0!==o&&(t.exports=o))},function(t,e,i){var n,o;n=[i,e],o=function(){var t;return function(t){t[t.Text=4]="Text",t[t.Sticker=5]="Sticker",t[t.Image=1]="Image"}(t||(t={})),t}.apply(e,n),!(void 0!==o&&(t.exports=o))},function(t,e,i){var n,o,s=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i};n=[i,e,i(21)],o=function(t,e,i){var n=function(t){function e(e,i){t.call(this,e,i.x,i.y),this._width=i.width*i.scale,this._fontSize=10*i.scale,this._text=i.text,this._createFormattedText()}return s(e,t),e.prototype._createFormattedText=function(){var t=this,e=this._text.match(/<P>(.*?)<\/P>/g);e.forEach(function(e){var i=e.match(/<P><F C="(.*?)">(.*?)<\/FONT><\/P>/);if(i){var n=document.createElement("div");n.style.color=i[1];var o=i[2],o=o.replace(/<F C=".*">.*?<\/FONT>/g,"");""==o&&(o="&nbsp;"),n.innerHTML=o,t._element.appendChild(n)}})},e.prototype._applyDrawAttributes=function(){t.prototype._applyDrawAttributes.call(this),this._element.style.width=this._width*this._scale+"px",this._element.style.fontSize=this._fontSize*this._scale+"pt"},e}(i);return n}.apply(e,n),!(void 0!==o&&(t.exports=o))},function(t,e,i){var n,o,s=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i};n=[i,e,i(21)],o=function(t,e,i){var n=function(t){function e(e,i){t.call(this,e,i.x,i.y),this._element.style.backgroundColor="#ff0",this._element.style.color="#000",this._element.style.textAlign="center",this._element.innerText=i.text}return s(e,t),e.prototype._applyDrawAttributes=function(){t.prototype._applyDrawAttributes.call(this);var e=200*this._scale;this._element.style.width=e+"px",this._element.style.height=e+"px",this._element.style.fontSize=25*this._scale+"pt"},e}(i);return n}.apply(e,n),!(void 0!==o&&(t.exports=o))},function(t,e,i){var n,o,s=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i};n=[i,e,i(20),i(21)],o=function(t,e,i,n){var o=function(t){function e(e,n){var o=this;t.call(this,e,n.x,n.y,"img"),this._angle=n.angle,this._element.addEventListener("mousedown",function(t){t.stopPropagation()}),this._element.addEventListener("mouseup",function(t){t.stopPropagation()}),this._promise=new i;var s=this._element;this._element.onload=function(){o._width=s.width*n.scale,o._heigh=s.height*n.scale,o._element.style.transform="rotate("+o._angle+"deg)",o._promise.resolve()},s.src=n.url}return s(e,t),e.prototype.draw=function(t,e,i,n,o){var s=this;this._calcCoords(t,e,i,n,o),this._promise.done(function(){s._element.style.display="none",s._applyDrawAttributes(),s._element.style.display="block"})},e.prototype._applyDrawAttributes=function(){var t=this._angle*Math.PI/180,e=this._width*this._scale,i=this._heigh*this._scale,n=e/2-(Math.abs(Math.cos(t)*e/2)+Math.abs(Math.sin(t)*i/2)),o=i/2-(Math.abs(Math.cos(t)*i/2)+Math.abs(Math.sin(t)*e/2));this._element.style.top=this._y-o+"px",this._element.style.left=this._x-n+"px",this._element.style.width=e+"px",this._element.style.height=i+"px"},e}(n);return o}.apply(e,n),!(void 0!==o&&(t.exports=o))},function(t,e,i){var n,o,s=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i};n=[i,e,i(22)],o=function(t,e,i){var n=function(t){function e(e,i,n){t.call(this,i,n),this._ctx=e}return s(e,t),e}(i);return n}.apply(e,n),!(void 0!==o&&(t.exports=o))},function(t,e,i){var n,o;n=[i,e],o=function(){var t=function(){function t(){this._resolve=!1}return t.prototype.resolve=function(){this._resolve=!0,this._handler&&(this._handler(),delete this._handler)},t.prototype.done=function(t){this._resolve?t():this._handler=t},t}();return t}.apply(e,n),!(void 0!==o&&(t.exports=o))},function(t,e,i){var n,o,s=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i};n=[i,e,i(22)],o=function(t,e,i){var n=function(t){function e(e,i,n,o){void 0===o&&(o="div"),t.call(this,i,n),this._element=document.createElement(o),this._element.style.position="absolute",this._element.style.zIndex="1",this._element.style.fontFamily="Arial",this._element.style.display="none",e.appendChild(this._element)}return s(e,t),e.prototype.draw=function(e,i,n,o,s){t.prototype.draw.call(this,e,i,n,o,s),this._element.style.display="none",this._applyDrawAttributes(),this._element.style.display="block"},e.prototype._applyDrawAttributes=function(){this._element.style.top=this._y+"px",this._element.style.left=this._x+"px"},e}(i);return n}.apply(e,n),!(void 0!==o&&(t.exports=o))},function(t,e,i){var n,o;n=[i,e],o=function(){var t=function(){function t(t,e){this._scale=1,this._x=t,this._y=e}return t.prototype._calcCoords=function(t,e,i,n,o){this._x=i+(this._x-i+t)/this._scale*o,this._y=n+(this._y-n+e)/this._scale*o,this._scale=o},t.prototype.draw=function(t,e,i,n,o){this._calcCoords(t,e,i,n,o)},t}();return t}.apply(e,n),!(void 0!==o&&(t.exports=o))}]);